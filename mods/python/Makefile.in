CC = @CC@
prefix = @prefix@
exec_prefix = @exec_prefix@
moddir = @libdir@/ctrlproxy
INSTALL = @INSTALL@
CFLAGS = @PY_CFLAGS@ -fPIC -I../.. -I.. @CFLAGS@ @PKG_CFLAGS@  -DSHAREDIR=\"@datadir@\"
LIBS = @PY_LIBS@

.PHONY: all clean distclean install

all: libpython.so

install:
	$(INSTALL) libpython.so $(DESTDIR)$(moddir)

%.o: %.c
	$(CC) $(CFLAGS) -fPIC -c $<

libpython.so: python.o types.o
	$(CC) $(CFLAGS) -shared -o $@ $(LIBS) types.o python.o

clean:
	rm -f $(MODS) *.o

distclean: clean
	rm -f Makefile
