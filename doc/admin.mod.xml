<ctrlproxy:module name="admin"
	xmlns:ctrlproxy="http://ctrlproxy.vernstok.nl/common">
	<modulemeta>
		<description>Remote administration</description>
		<version>0.1</version>
		<author>Jelmer Vernooij</author>
		<email>jelmer@vernstok.nl</email>
		<homepage>http://ctrlproxy.vernstok.nl/</homepage>
		<type>admin</type>
	</modulemeta>

	<description>
		<para>This module provides a simple interface for 
		remote administration of ControlProxy. Commands 
		can be executed by either using the /CTRLPROXY command in 
		your IRC client or sending them to the nick 
		<constant>ctrlproxy</constant> on a network. </para>

		<para>The syntax for the commands is very simple: 
		the command should be followed by one or arguments, seperated 
		by spaces. Quoting is not supported.</para>
	</description>

	<section>
		<title>Commands</title>

		<para>The following commands are supported:</para>

		<variablelist>
			<varlistentry><term>ADDNETWORK &lt;name&gt;</term>
			<listitem><para>
			Adds a new network with the specified name.
			</para></listitem></varlistentry>

			<varlistentry><term>ADDLISTEN &lt;network&gt; &lt;type&gt; [&lt;key&gt;=&lt;value&gt;] [...]</term>
			<listitem><para>
			Adds a new 'listener' to the specified network with the specified type and options.</para>

			<para>Example: <command>addlisten OPN ipv4 port=6676</command></para>
			</listitem></varlistentry>

			<varlistentry><term>ADDSERVER &lt;network&gt; &lt;type&gt; [&lt;key&gt;=&lt;value&gt;] [...]</term>
			<listitem><para>
			Adds a new server to the specified network with the specified type and options.</para>

			<para>Example: <command>addserver OPN ipv4 host=irc.freenode.net</command></para>

			</listitem></varlistentry>

			<varlistentry><term>CONNECT &lt;network&gt;</term>

			<listitem><para>Connect to the specifed network. Ctrlproxy will connect to the first known server for this network.</para></listitem></varlistentry>

			<varlistentry><term>DIE</term>

			<listitem><para>Disconnect all clients and servers and exit ctrlproxy.</para></listitem></varlistentry>

			<varlistentry><term>DISCONNECT &lt;network&gt;</term>

			<listitem><para>Disconnect from the specified network.</para></listitem></varlistentry>

			<varlistentry><term>DETACH</term>

			<listitem><para>Detach client from the proxy.</para></listitem></varlistentry>

			<varlistentry><term>LISTNETWORKS</term>
			<listitem><para>Prints out a list of all networks 
			ctrlproxy is connected to at the moment.</para></listitem></varlistentry>

			<varlistentry><term>LOADMODULE &lt;location&gt;</term>
			<listitem><para>Load DSO module (aka 'plugin') from the specified location. </para></listitem></varlistentry>

			<varlistentry><term>RELOADMODULE &lt;location&gt;</term>
			<listitem><para>Reload the DSO module at the specified location. This does the same as doing a <command>UNLOADMODULE</command> followed by a <command>LOADMODULE</command>.</para></listitem></varlistentry>

			<varlistentry><term>UNLOADMODULE &lt;location&gt;</term>
			<listitem><para>Unload the DSO module which was loaded from the specified location. This may or may not work correctly, depending on the plugin you are trying to unload.</para></listitem></varlistentry>

			<varlistentry><term>LISTMODULES</term>
			<listitem><para>Prints out a list of all currently loaded plugins.</para></listitem></varlistentry>

			<varlistentry><term>DUMPCONFIG</term>
			<listitem><para>Prints out the current configuration file XML data.</para></listitem></varlistentry>

			<varlistentry><term>SAVECONFIG</term>
			<listitem><para>Save the (updated) XML configuration file to the location it was loaded from (usually <filename>$HOME/.ctrlproxyrc</filename>).</para></listitem></varlistentry>

			<varlistentry><term>HELP</term>
			<listitem><para>Prints out list of available commands.</para></listitem></varlistentry>

		</variablelist>
	</section>

	<section>
			<title>Example commands</title>

<para>
	Adding a new network called 'OFTC', listening for incoming connections on 
	port 6667.
	<screen>
ADDNETWORK OFTC
ADDSERVER OFTC ipv4 host=irc.oftc.net
ADDLISTEN OFTC ipv4 port=6667
CONNECT OFTC
</screen>
</para>
	</section>

	<configuration>
		<element name="without_privmsg" type="bool">
			<description>If this element is present, you can not execute admin commands by sending them to the nick 'ctrlproxy'. This can be useful for IRC clients that don't allow unknown IRC commands to be executed.</description>
		</element>
	</configuration>

</ctrlproxy:module>
